/* ============================================================================
   CSS VARIABLES & RESET
   ============================================================================ */

:root {
    --bg-color: #EEF2FF;
    --card-bg: #FFFFFF;
    --text-color: #333333;
    --text-muted: #64748B;
    --accent-pink: #FF6B9C;
    --accent-pink-light: #FFCFDE;
    --accent-purple: #D56BFF;
    --accent-purple-light: #F0D4FF;
    --border-radius: 16px;
    --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
    --font-family: 'Inter', sans-serif;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* ============================================================================
   BASE LAYOUT
   ============================================================================ */

body {
    font-family: var(--font-family);
    background-color: var(--bg-color);
    color: var(--text-color);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem;
    /* Glowing Orbs Background */
    background:
        radial-gradient(circle at 10% 20%, rgba(213, 107, 255, 0.15) 0%, transparent 40%),
        radial-gradient(circle at 90% 80%, rgba(74, 222, 128, 0.1) 0%, transparent 40%),
        radial-gradient(circle at 50% 50%, #EEF2FF 0%, #E0E7FF 100%);
    background-attachment: fixed;
}

.app-container {
    width: 100%;
    max-width: 1400px;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    padding: 2rem;
}

.main-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.header-logos {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.header-logos img {
    height: 60px;
    width: auto;
    object-fit: contain;
}

.logo-ub {
    height: 60px;
}

.logo-brone {
    height: 50px;
}

.main-header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    color: #1E1B4B;
    /* Dark navy */
}

.dashboard-grid {
    display: grid;
    grid-template-columns: 1fr 2fr 1fr;
    gap: 1.5rem;
    width: 100%;
}

/* ============================================================================
   CARDS & COMMON ELEMENTS
   ============================================================================ */

.card {
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.6);
    border-radius: var(--border-radius);
    padding: 1.5rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    display: flex;
    flex-direction: column;
}

h3 {
    font-size: 1rem;
    color: var(--text-muted);
    margin-bottom: 1rem;
    font-weight: 500;
}

.header-controls {
    display: flex;
    gap: 1rem;
    align-items: center;
}

/* ============================================================================
   BATTERY CARD
   ============================================================================ */

.battery-card .card-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.battery-card h3 {
    align-self: flex-start;
    width: 100%;
    margin-bottom: 1rem;
}

.circular-progress-container {
    position: relative;
    width: 160px;
    height: 160px;
    margin: 1rem 0 2rem 0;
}

.circular-progress {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: conic-gradient(#60A5FA 0%, #D56BFF 92%, #EEF2FF 92%);
    /* Gradient matching image vibe */
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 10px rgba(96, 165, 250, 0.2);
}

.inner-circle {
    width: 70%;
    /* Thicker ring (was 82%) */
    height: 70%;
    background-color: var(--card-bg);
    /* Use card-bg which is transparent/semi-white */
    /* Wait, the card has milky glass now. inner-circle should probably match or be transparent? 
       Using card-bg var is fine if it matches the new theme or is updated. 
       Actually, if the card is milky glass, the inner circle cutting out the conic gradient needs to match the card background.
       Since .card has rgba(255,255,255,0.85), let's hardcode that or leave as is if var(--card-bg) works. 
       var(--card-bg) is #FFFFFF (Line 3). 
       If I use #FFFFFF, it will be solid white on top of the milky card. 
       Ideally, it should be the same as the card background. */
    background: rgba(255, 255, 255, 0.9);
    /* Match the fake glass look */
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    /* Inner depth */
}

.percentage {
    font-size: 2.2rem;
    font-weight: 700;
    color: var(--text-color);
}

.remaining-section {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.remaining-label {
    font-size: 1.1rem;
    color: var(--text-muted);
}

.remaining-value {
    font-size: 2.5rem;
    /* Larger */
    font-weight: 800;
    /* Extra Bold */
    color: #1e293b;
    letter-spacing: -1px;
}

/* Battery Avg Cell Pill */
.battery-voltage-pill {
    margin-top: 25px;
    background: rgba(99, 102, 241, 0.15);
    border: 1px solid rgba(99, 102, 241, 0.5);
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.2);
    /* Glow */
    font-family: 'Monaco', 'Consolas', monospace;
    /* Tech font */
    color: #6366f1;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

/* ============================================================================
   GRAPH CARD
   ============================================================================ */

.graph-card {
    justify-content: space-between;
}

/* Time Range Footer */
.time-range-selector {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    /* Divider */
}

/* Override control-btn styles specifically for footer if needed or reuse */
.time-range-selector .control-btn {
    background: transparent;
    border: none;
    padding: 6px 16px;
    border-radius: 8px;
    color: #94a3b8;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.9rem;
    box-shadow: none;
    /* Remove default shadow */
}

.time-range-selector .control-btn.active {
    background: #f1f5f9;
    color: #475569;
    font-weight: 700;
    box-shadow: none;
}

.card-header {
    display: flex;
    flex-direction: column;
    /* Stack vertically */
    justify-content: center;
    align-items: center;
    margin-bottom: 2rem;
    gap: 1rem;
}

.graph-controls {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    /* Handle small screens */
}

.segmented-control {
    display: flex;
    background-color: #F1F5F9;
    padding: 3px;
    border-radius: 10px;
    gap: 2px;
}

.control-btn {
    border: none;
    background: transparent;
    padding: 5px 10px;
    /* Compact padding */
    border-radius: 7px;
    color: var(--text-muted);
    font-family: var(--font-family);
    font-size: 0.85rem;
    /* Slightly smaller font */
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.control-btn:hover {
    color: var(--text-color);
}

.control-btn.active {
    background-color: #FFFFFF;
    color: #1E293B;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08), 0 1px 1px rgba(0, 0, 0, 0.04);
    font-weight: 600;
}

.chart-container {
    position: relative;
    height: 250px;
    width: 100%;
}

/* ============================================================================
   VISUALIZER CARD  
   ============================================================================ */

.omni-visualizer {
    position: relative;
    width: 100%;
    height: 320px;
    /* Increased from 250px to prevent wheel overlap */
    /* Reduced height to fit better */
    /* Background Gradient to enhance Glass Effect */
    background: radial-gradient(circle at center, #F1F5F9 0%, #E2E8F0 100%);
    border-radius: 12px;
    margin-top: 1rem;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Chassis Visual (SVG) */
/* Bentuk Dasar Body Robot - Premium Liquid Glass */
.chassis-body {
    width: 100px;
    height: 140px;

    /* 1. Frosted Glass Material */
    /* OPTIMIZATION: Fake Glass (Solid Semi-transparent) */
    background: rgba(248, 250, 252, 0.95);
    /* Increased opacity */

    /* 2. Rim Light (Edge Definition) */
    border-top: 1px solid rgba(255, 255, 255, 0.8);
    border-left: 1px solid rgba(255, 255, 255, 0.8);
    border-right: 1px solid rgba(255, 255, 255, 0.2);
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);

    border-radius: 30px;
    position: relative;

    /* 3. Soft Colored Shadow & Inner Volume */
    box-shadow:
        0 10px 20px rgba(124, 58, 237, 0.1);
    /* Simplified shadow */
    /* inset 0 0 20px rgba(255, 255, 255, 0.5); -- REMOVED INNER GLOW FOR PERF */

    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 5;
}

/* Indikator Bagian "Depan" */
.drone-front-indicator {
    position: absolute;
    top: 15px;
    width: 40%;
    height: 6px;
    background: #c084fc;
    /* Purple */
    border-radius: 10px;
    box-shadow: 0 0 8px rgba(192, 132, 252, 0.6);
}

/* Hiasan Tengah (Core) - Heartbeat Animation */
/* Hiasan Tengah (Core) - Heartbeat Animation */
.drone-core {
    position: absolute;
    /* Center it */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    /* Start centered */
    width: 16px;
    /* Slightly larger */
    height: 16px;
    background-color: #4ade80;
    border-radius: 50%;
    box-shadow: 0 0 10px #4ade80;
    animation: heartbeat 2s infinite;
    z-index: 0;
    /* Behind arrow */
}

@keyframes heartbeat {
    0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.8;
    }

    50% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0.4;
    }

    100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.8;
    }
}

.resultant-arrow {
    font-size: 3.5rem;
    color: #1E293B;
    transition: transform 0.3s ease;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 900;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
    z-index: 2;
    /* On top of core */
}

.wheel {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
    z-index: 5;
    width: 90px;
    /* Slightly wider for boxing */
    padding: 0.5rem;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.4);
    /* Subtle grouping background */
    border: 1px solid rgba(255, 255, 255, 0.5);
    /* Subtle border */
    text-align: center;
    transition: all 0.3s ease;
}

/* Positioning - Adjusted for new size/padding */
.fl {
    top: 10px;
    left: 10px;
}

.fr {
    top: 10px;
    right: 10px;
}

.rl {
    bottom: 10px;
    left: 10px;
}

.rr {
    bottom: 10px;
    right: 10px;
}

.wheel-arrow-container {
    font-size: 2rem;
    transition: all 0.2s ease;
    /* Sharpen Arrow - Remove/Reduce Glow */
    /* text-shadow: 0 0 10px #4ADE80; -- Removed heavy blur */
    filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.1));
    /* Crisp shadow instead */
}

/* Override specific arrow icons if needed */
#arrowFL i,
#arrowFR i,
#arrowRL i,
#arrowRR i {
    text-shadow: none;
    /* Ensure no blur */
}

.wheel-label {
    margin-bottom: 0.1rem;
    font-size: 0.7rem;
    color: #64748B;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.wheel-rpm {
    font-size: 0.85rem;
    font-weight: 700;
    font-family: 'Courier New', Courier, monospace;
    /* Monospace for stability */
    color: #2563EB;
    /* Darker Blue (Blue-600) for contrast */
    margin-bottom: 4px;
    /* Boxed style for RPM too to match Torque if desired, or just bold text. 
       User wanted equal weight. Let's box it slightly or just make it very bold.
       Let's stick to text but clearer. */
}

.wheel-val {
    font-size: 0.8rem;
    font-weight: 700;
    font-family: 'Courier New', Courier, monospace;
    color: #1E293B;
    /* Dark Slate */
    background: #FFFFFF;
    /* White box */
    padding: 2px 6px;
    border-radius: 4px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    /* Lighter shadow */
    border: 1px solid rgba(0, 0, 0, 0.05);
}

/* ============================================================================
   TERMINAL CARD
   ============================================================================ */

.terminal-window {
    background-color: #0F172A;
    color: #F8FAFC;
    padding: 1rem;
    border-radius: 8px;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.85rem;
    overflow-y: auto;
}

.log-line {
    margin-bottom: 4px;
    width: 100%;
}

.log-time {
    color: #64748B;
    margin-right: 8px;
}

.log-msg {
    color: #4ADE80;
    /* Matrix green-ish */
}

/* Terminal Log - Spans first 2 columns (Battery + Graph aka 1fr + 2fr) */
.terminal-card {
    grid-column: 1 / 3;
}

/* ============================================================================
   STATUS CARD
   ============================================================================ */

.status-card {
    grid-column: 3 / 4;
    display: flex;
    justify-content: center;
}

.status-content {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    width: 100%;
}

.status-main {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}

.status-indicator-wrapper {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: rgba(74, 222, 128, 0.1);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    border: 1px solid rgba(74, 222, 128, 0.2);
}

#arrowFL,
#arrowFR,
#arrowRL,
#arrowRR,
#resArrow {
    transition: transform 0.3s ease-out, opacity 0.3s ease-out;
}

#arrowFL i,
#arrowFR i,
#arrowRL i,
#arrowRR i {
    font-size: 2.5rem;
    color: #4ADE80;
    /* Default Green */
    text-shadow: 0 0 10px #4ADE80;
    transform-origin: center;
}

.status-dot {
    width: 10px;
    height: 10px;
    background-color: #4ADE80;
    border-radius: 50%;
    box-shadow: 0 0 10px #4ADE80;
    animation: pulse 2s infinite;
}

.status-text {
    font-weight: 600;
    color: #166534;
    font-size: 0.95rem;
}

/* ============================================================================
   ANIMATIONS
   ============================================================================ */

@keyframes pulse {
    0% {
        box-shadow: 0 0 0 0 rgba(74, 222, 128, 0.7);
    }

    70% {
        box-shadow: 0 0 0 6px rgba(74, 222, 128, 0);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(74, 222, 128, 0);
    }
}

.ping-wrapper {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
}

.ping-wrapper i {
    font-size: 1.2rem;
}

.status-ping {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-color);
    font-family: monospace;
}

.status-divider {
    height: 1px;
    background: linear-gradient(to right, transparent, #E2E8F0, transparent);
    margin: 0.5rem 0;
    width: 100%;
}

.time-metrics {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.time-display {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem;
    border-radius: 8px;
    transition: background-color 0.2s;
}

.time-display:hover {
    background-color: #F8FAFC;
}

.time-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    font-size: 0.9rem;
}

.time-label i {
    color: var(--accent-purple);
    font-size: 1.1rem;
}

.time-value {
    font-weight: 600;
    font-family: monospace;
    font-size: 1.1rem;
    color: var(--text-color);
}

/* Control Button */
.control-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
}

/* Toggle Switch */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 26px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #000;
    -webkit-transition: .4s;
    transition: .4s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
}

input:checked+.slider {
    background-color: #000;
}

input:focus+.slider {
    box-shadow: 0 0 1px #000;
}

input:checked+.slider:before {
    -webkit-transform: translateX(24px);
    -ms-transform: translateX(24px);
    transform: translateX(24px);
}

.slider.round {
    border-radius: 34px;
}

.slider.round:before {
    border-radius: 50%;
}

/* Grid areas modification to match visuals */
/* 
Visual check:
Col 1: Battery (Top), Terminal (Bottom)
Col 2: Graph (Top, wide?), Connection (Bottom)
Col 3: Prediction (Top), Control (Bottom)
Actually, in the image:
Top Row: Battery | Graph | Prediction
Bottom Row: Terminal Log | Connection Status | Control Button
It looks like the Terminal Log is WIDE. It spans roughly the width of Battery + half of Graph? 
But standard grid is easier. Let's make bottom row match top row structure 1:1 first.
Battery (1) -> Terminal (1)? No Terminal is wider.
Let's define explicit areas.
*/

.dashboard-grid {
    grid-template-areas:
        "battery graph prediction"
        "terminal connection control";
    grid-template-columns: 1fr 2fr 1fr;
}

.battery-card {
    grid-area: battery;
}

.graph-card {
    grid-area: graph;
}

.prediction-card {
    grid-area: prediction;
}

.terminal-card {
    grid-area: terminal;
    grid-column: 1 / 3;
    /* Span 2 columns! */
}

.status-card {
    grid-area: connection;
    grid-column: 3 / 4;
    /* Wait, if terminal spans 1-3, this pushes others out. */
}

/* Re-thinking the grid.
If 3 columns:
Row 1: 1fr 2fr 1fr
Row 2: 
 Terminal takes Col 1 and part of Col 2?
 Connection takes rest of Col 2?
 Control takes Col 3.
 This suggests a 4 column grid might be better?
 1fr 1fr 1fr 1fr?
 Battery: span 1. Graph: span 2. Prediction: span 1. (Total 4)
 Terminal: span 2. Connection: span 1. Control: span 1. (Total 4)
 YES. That aligns perfectly.
*/
.dashboard-grid {
    grid-template-columns: repeat(4, 1fr);
    grid-template-areas:
        "battery graph graph prediction"
        "terminal terminal terminal connection";
}

.battery-card {
    grid-area: battery;
}

.graph-card {
    grid-area: graph;
}

.prediction-card {
    grid-area: prediction;
}

.terminal-card {
    grid-area: terminal;
}

.status-card {
    grid-area: connection;
}



/* Darken terminal BG - Dark Glass */
/* Darken terminal BG - Optimized Dark Glass */
.terminal-window {
    background-color: rgba(15, 23, 42, 0.95);
    /* High opacity solid color */
    /* backdrop-filter removed */
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);

    color: #F8FAFC;
    padding: 1rem;
    border-radius: 8px;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.85rem;
    align-items: stretch;
    /* Ensure children take full width */
}

.terminal-logs {
    flex-grow: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
}

.terminal-status-bar {
    display: flex;
    align-items: center;
    gap: 30px;
    /* User requested "breathable" space */
    border-top: 1px solid rgba(148, 163, 184, 0.4);
    /* Stronger border */
    padding-top: 0.75rem;
    margin-top: 0.5rem;
    font-size: 0.75rem;
    color: #94A3B8;
    font-family: 'Courier New', Courier, monospace;
    width: 100%;
    /* Ensure border spans full width */
}

.terminal-status-bar .status-item {
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.terminal-status-bar .highlight {
    color: #4ADE80;
    font-weight: 600;
}

#sysUptime {
    color: #E2E8F0;
    font-weight: 600;
}

/* Header Buttons */
.header-controls {
    display: flex;
    gap: 1rem;
}

.btn {
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-family: var(--font-family);
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    border: none;
    transition: all 0.2s;
}

.btn-primary {
    background-color: var(--accent-purple);
    color: white;
}

.btn-primary:hover {
    background-color: #be4bdb;
}

.btn-primary.stopped {
    background-color: #EF4444;
    /* Red for Stop */
}

.btn-primary.stopped:hover {
    background-color: #DC2626;
}

.btn-secondary {
    background-color: #E2E8F0;
    color: var(--text-color);
}

.btn-secondary:hover {
    background-color: #CBD5E1;
}

@media (max-width: 1024px) {
    .dashboard-grid {
        grid-template-columns: 1fr 1fr;
        grid-template-areas:
            "battery prediction"
            "graph graph"
            "terminal terminal"
            "connection control";
    }
}

@media (max-width: 768px) {
    .dashboard-grid {
        display: flex;
        flex-direction: column;
    }
}

/* Modal Styles */
.modal {
    display: none;
    /* Hidden by default */
    position: fixed;
    z-index: 100;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    /* Black w/ opacity */
    align-items: center;
    justify-content: center;
}

.modal.show {
    display: flex;
}

.modal-content {
    background-color: var(--card-bg);
    padding: 2rem;
    border-radius: var(--border-radius);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    width: 90%;
    max-width: 400px;
    text-align: center;
    animation: scaleUp 0.3s ease;
}

@keyframes scaleUp {
    from {
        transform: scale(0.9);
        opacity: 0;
    }

    to {
        transform: scale(1);
        opacity: 1;
    }
}

.modal-content h2 {
    color: var(--text-color);
    margin-bottom: 0.5rem;
}

.modal-content p {
    color: var(--text-muted);
    margin-bottom: 2rem;
}

.modal-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
}

/* Battery Configuration Modal Specific Styles */
.config-section {
    margin: 1.5rem 0;
    text-align: left;
}

.config-section label {
    display: block;
    font-weight: 600;
    color: var(--text-color);
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
}

.config-select {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #E2E8F0;
    border-radius: 8px;
    font-size: 0.95rem;
    font-family: var(--font-family);
    background-color: #F8FAFC;
    color: var(--text-color);
    cursor: pointer;
    transition: all 0.2s;
}

.config-select:hover {
    border-color: #CBD5E1;
    background-color: #FFFFFF;
}

.config-select:focus {
    outline: none;
    border-color: #6366F1;
    background-color: #FFFFFF;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.config-preview {
    background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%);
    padding: 1.5rem;
    border-radius: 12px;
    margin: 1.5rem 0;
    border: 2px solid #C7D2FE;
}

.preview-label {
    font-size: 0.85rem;
    color: #6366F1;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.75rem;
}

.preview-value {
    display: flex;
    align-items: baseline;
    gap: 0.75rem;
    justify-content: center;
}

.preview-cells {
    font-size: 2rem;
    font-weight: 800;
    color: #4338CA;
}

.preview-voltage {
    font-size: 1.1rem;
    color: #6366F1;
    font-weight: 600;
}

/* === CRITICAL FIXES APPLIED === */
/* Override problematic rules */

.metrics-row {
    display: flex !important;
    flex-direction: row !important;
    gap: 0.75rem !important;
}

.metric-item {
    background: rgba(0, 0, 0, 0.03) !important;
    border: 1px solid rgba(0, 0, 0, 0.05) !important;
    padding: 8px 12px !important;
    border-radius: 12px !important;
    min-width: 80px !important;
}

.wheel-val {
    background: transparent !important;
    padding: 0 !important;
    font-weight: 900 !important;
    box-shadow: none !important;
    border: none !important;
}

body {
    padding: 0.75rem !important;
}

.main-header {
    margin-bottom: 0.5rem !important;
}

.dashboard-grid {
    gap: 0.75rem !important;
}

.card {
    padding: 0.85rem !important;
}

.chart-container {
    height: 220px !important;
}

.omni-visualizer {
    min-height: 240px !important;
}

.terminal-window {
    height: 140px !important;
}

/* Drone Frame Image Integration */
.drone-frame-image {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 70%;
    height: 70%;
    object-fit: contain;
    opacity: 0.6;
    z-index: 0;
    pointer-events: none;
}

.chassis-body {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

/* ===== NEW 2x2 GRID VISUALIZER DESIGN ===== */

/* Omni Visualizer - 2x2 Grid Container */
.omni-visualizer {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    grid-template-rows: 1fr 1fr !important;
    gap: 3rem !important;
    padding: 2rem !important;
    position: relative !important;
    min-height: 350px !important;
    height: auto !important;
    background: transparent !important;
    border-radius: 0 !important;
}

/* SVG Drone - Centered Absolutely */
.drone-svg {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 50%;
    max-width: 200px;
    height: auto;
    opacity: 0.15;
    z-index: 0;
    pointer-events: none;
}

/* Motor Cards */
.motor-card {
    background: white;
    border-radius: 16px;
    padding: 1rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(241, 245, 249, 0.8);
    z-index: 10;
    position: relative;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.motor-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    transform: translateY(-2px);
}

/* Card Positioning */
.motor-fl {
    grid-column: 1;
    grid-row: 1;
}

.motor-fr {
    grid-column: 2;
    grid-row: 1;
}

.motor-rl {
    grid-column: 1;
    grid-row: 2;
}

.motor-rr {
    grid-column: 2;
    grid-row: 2;
}

/* Card Header Mini */
.card-header-mini {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
}

.position-label {
    font-size: 0.7rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #94a3b8;
}

.position-desc {
    font-size: 0.6rem;
    color: #cbd5e1;
    font-weight: 500;
}

/* RPM Display */
.rpm-display {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    margin-bottom: 1rem;
}

.rpm-value {
    font-size: 2.5rem;
    font-weight: 900;
    color: #3b82f6;
    line-height: 1;
    font-family: 'Inter', sans-serif;
}

.rpm-unit {
    font-size: 0.7rem;
    font-weight: 700;
    color: #93c5fd;
    margin-top: 0.25rem;
}

/* Torque Display */
.torque-display {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: #f8fafc;
    border-radius: 10px;
    padding: 0.5rem;
    margin-bottom: 0.75rem;
    gap: 0.5rem;
}

.torque-icon {
    background: #dbeafe;
    color: #3b82f6;
    padding: 0.3rem;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
}

.torque-label {
    font-size: 0.6rem;
    font-weight: 700;
    text-transform: uppercase;
    color: #94a3b8;
    letter-spacing: 0.5px;
    flex-grow: 1;
}

.torque-value {
    font-size: 0.85rem;
    font-weight: 600;
    font-family: 'Monaco', 'Courier New', monospace;
    color: #475569;
}

.torque-unit {
    font-size: 0.65rem;
    color: #94a3b8;
}

/* RPM Progress Bar */
.rpm-progress {
    width: 100%;
    height: 4px;
    background: #f1f5f9;
    border-radius: 4px;
    overflow: hidden;
}

.rpm-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #60a5fa);
    border-radius: 4px;
    transition: width 0.5s ease;
    width: 0%;
}

/* Hide old wheel/chassis styles */
.wheel,
.chassis-body,
.drone-front-indicator,
.drone-core,
.wheel-arrow-container,
.wheel-label,
.wheel-rpm,
.wheel-val,
.resultant-arrow,
.drone-frame-image {
    display: none !important;
}


/* Overall Direction Indicator */
.overall-direction {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(59, 130, 246, 0.15);
    border: 2px solid rgba(59, 130, 246, 0.4);
    border-radius: 50%;
    z-index: 5;
    transition: all 0.3s ease;
    opacity: 0;
}

.overall-direction i {
    font-size: 2rem;
    color: #3b82f6;
    transition: transform 0.2s ease;
}

.overall-direction.active {
    opacity: 1;
}

.overall-direction.rotating {
    background: rgba(168, 85, 247, 0.15);
    border-color: rgba(168, 85, 247, 0.4);
}

.overall-direction.rotating i {
    color: #a855f7;
}

/* === REFINED METRICS ROW STYLING === */
.metrics-row {
    display: flex !important;
    flex-direction: row !important;
    justify-content: center;
    align-items: stretch;
    gap: 0.5rem !important;
    margin-bottom: 1rem !important;
    width: 100%;
}

.metric-item {
    flex: 1;
    background: linear-gradient(135deg, rgba(248, 250, 252, 0.8), rgba(241, 245, 249, 0.6)) !important;
    border: 1px solid rgba(226, 232, 240, 0.8) !important;
    padding: 0.65rem 1rem !important;
    border-radius: 10px !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    min-width: 85px !important;
    transition: all 0.2s ease;
}

.metric-item:hover {
    background: linear-gradient(135deg, rgba(241, 245, 249, 1), rgba(226, 232, 240, 0.8)) !important;
    border-color: rgba(203, 213, 225, 1) !important;
    transform: translateY(-1px);
}

.metric-label {
    font-size: 0.7rem !important;
    text-transform: uppercase !important;
    color: #64748B !important;
    font-weight: 700 !important;
    letter-spacing: 0.8px !important;
    margin-bottom: 0.35rem !important;
    line-height: 1 !important;
}

.metric-value {
    font-size: 1.15rem !important;
    font-weight: 800 !important;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
    color: #1E293B !important;
    line-height: 1.2 !important;
}

.metric-divider {
    display: none !important;
}

/* Battery Stats Grid */
.battery-stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
    margin-top: 1rem;
}

.battery-stat-item {
    background: rgba(59, 130, 246, 0.05);
    border: 1px solid rgba(59, 130, 246, 0.1);
    border-radius: 10px;
    padding: 0.65rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.2s ease;
}

.battery-stat-item:hover {
    background: rgba(59, 130, 246, 0.08);
    border-color: rgba(59, 130, 246, 0.2);
    transform: translateY(-1px);
}

.stat-icon {
    font-size: 1.25rem;
    line-height: 1;
}

.stat-info {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
}

.stat-label {
    font-size: 0.65rem;
    text-transform: uppercase;
    color: #64748B;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.stat-value {
    font-size: 0.9rem;
    font-weight: 700;
    color: #1E293B;
    font-family: 'Monaco', 'Courier New', monospace;
}

/* === BATTERY CARD VISUAL REFINEMENT === */
/* Stronger card presence */
.battery-card {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important;
    transition: all 0.3s ease;
}

.battery-card:hover {
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12) !important;
    transform: translateY(-2px);
}

.battery-card .card-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem 1rem !important;
    min-height: 100%;
}

/* Enlarge and center circular progress */
.circular-progress-container {
    margin: 2rem 0 !important;
    position: relative;
}

.circular-progress {
    width: 180px !important;
    height: 180px !important;
    position: relative;
}

/* Glow effect behind progress */
.circular-progress::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, rgba(74, 222, 128, 0.15) 0%, transparent 70%);
    border-radius: 50%;
    z-index: -1;
    animation: pulse-glow 3s ease-in-out infinite;
}

@keyframes pulse-glow {

    0%,
    100% {
        opacity: 0.5;
    }

    50% {
        opacity: 1;
    }
}

.inner-circle {
    width: 140px !important;
    height: 140px !important;
}

/* Typography - RAKSASA */
.percentage {
    font-size: 3.5rem !important;
    font-weight: 900 !important;
    line-height: 1 !important;
}

.remaining-section {
    text-align: center;
    margin-top: 1.5rem !important;
}

.remaining-label {
    font-size: 0.8rem !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 1.5px !important;
    color: #64748B !important;
    margin-bottom: 0.5rem !important;
}

.remaining-value {
    font-size: 2.5rem !important;
    font-weight: 900 !important;
    color: #1E293B !important;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
    line-height: 1 !important;
}

/* Battery card title */
.battery-card h3 {
    margin-bottom: 0.5rem !important;
    font-size: 1.1rem !important;
}

/* === PROPORTION FIXES - TIGHTER GROUPING === */

/* Battery Card - Tighter vertical grouping */
.battery-card .card-content {
    padding: 1.5rem 1rem !important;
    gap: 0.5rem !important;
}

.circular-progress-container {
    margin: 1rem 0 !important;
}

/* Thicker donut stroke for more visual weight */
.circular-progress svg {
    stroke-width: 12px !important;
}

/* Even BIGGER remaining time */
.remaining-value {
    font-size: 3rem !important;
    margin-top: 0.25rem !important;
}

.remaining-label {
    margin-bottom: 0.25rem !important;
}

/* Rover Visualizer - Pull to center */
.omni-visualizer {
    gap: 1.5rem !important;
    padding: 1.5rem !important;
}

/* Tighter motor cards */
.motor-card {
    padding: 0.85rem !important;
}


/* === ASYMMETRIC GRID LAYOUT === */
/* Battery now spans full width as horizontal bar at top */
.dashboard-grid {
    grid-template-columns: 2fr 1fr !important;
    grid-template-areas:
        "battery battery"
        "graph prediction"
        "terminal connection" !important;
    gap: 1rem !important;
}

/* Battery Card - Horizontal Layout */
.battery-card {
    grid-area: battery !important;
}

.battery-card .card-content {
    flex-direction: row !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 3rem !important;
    padding: 1.25rem 2rem !important;
    min-height: auto !important;
}

.battery-card h3 {
    position: absolute;
    top: 1rem;
    left: 1.5rem;
    margin: 0 !important;
}

.circular-progress-container {
    margin: 0 !important;
}

.circular-progress {
    width: 100px !important;
    height: 100px !important;
}

.inner-circle {
    width: 75px !important;
    height: 75px !important;
}

.percentage {
    font-size: 1.75rem !important;
}

.circular-progress::before {
    width: 120px !important;
    height: 120px !important;
}

.remaining-section {
    margin-top: 0 !important;
    text-align: left;
}

.remaining-label {
    font-size: 0.7rem !important;
    margin-bottom: 0.35rem !important;
}

.remaining-value {
    font-size: 2rem !important;
}

/* Graph Card - Widened */
.graph-card {
    grid-area: graph !important;
}

/* Visualizer (Prediction) */
.prediction-card {
    grid-area: prediction !important;
}

/* === REVERT TO 3-COLUMN LAYOUT === */
.dashboard-grid {
    grid-template-columns: repeat(4, 1fr) !important;
    grid-template-areas:
        "battery graph graph prediction"
        "terminal terminal terminal connection" !important;
}

/* Battery Card - Back to Vertical */
.battery-card {
    grid-area: battery !important;
}

.battery-card .card-content {
    flex-direction: column !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 0.5rem !important;
    padding: 1.5rem 1rem !important;
}

.battery-card h3 {
    position: static !important;
    align-self: flex-start !important;
    width: 100% !important;
    margin-bottom: 0.5rem !important;
}

.circular-progress-container {
    margin: 1rem 0 !important;
}

.circular-progress {
    width: 180px !important;
    height: 180px !important;
}

.inner-circle {
    width: 140px !important;
    height: 140px !important;
}

.percentage {
    font-size: 3.5rem !important;
}

.remaining-section {
    margin-top: 1.5rem !important;
    text-align: center !important;
}

.remaining-value {
    font-size: 3rem !important;
}

/* === FILL-STYLE BATTERY INDICATOR === */

/* Battery Container */
.battery-fill-container {
    margin: 1.5rem 0;
    display: flex;
    justify-content: center;
    align-items: center;
}

.battery-fill-svg {
    width: 140px;
    height: auto;
    filter: drop-shadow(0 4px 12px rgba(74, 222, 128, 0.2));
}

/* Battery Fill Level with Gradient */
.battery-fill-level {
    fill: url(#batteryGradient);
    transition: height 0.5s ease;
}

/* Percentage Text */
.battery-percentage-text {
    font-size: 3rem;
    font-weight: 900;
    fill: white;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

/* Battery Spec Section */
.battery-spec-section {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: rgba(74, 222, 128, 0.08);
    border: 1px solid rgba(74, 222, 128, 0.2);
    border-radius: 12px;
    padding: 0.75rem 1rem;
    margin-top: 1rem;
}

.spec-icon {
    font-size: 1.75rem;
    line-height: 1;
}

.spec-text {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
}

.spec-title {
    font-size: 0.95rem;
    font-weight: 700;
    color: #1E293B;
    line-height: 1.2;
}

.spec-details {
    font-size: 0.75rem;
    color: #64748B;
    font-weight: 500;
}

/* Reset previous circular progress styles */
.battery-card .circular-progress-container,
.battery-card .circular-progress,
.battery-card .circular-progress::before {
    display: none;
}

/* === POLISHING FIXES === */

/* Fix battery fill bottom radius to match container */
.battery-fill-level {
    /* Ensure rounded corners on bottom to match container */
    rx: 16 !important;
    ry: 16 !important;
}

/* Add breathing room between graph title and metrics */
.graph-card h3 {
    margin-bottom: 1.5rem !important;
}

/* Also ensure card-header has proper spacing */
.graph-card .card-header {
    margin-bottom: 1.25rem !important;
}

/* === REFINED BATTERY DESIGN === */
.battery-fill-svg {
    width: 110px !important;
    height: auto;
    filter: drop-shadow(0 6px 16px rgba(74, 222, 128, 0.25));
}

.battery-percentage-text {
    font-size: 2.5rem !important;
    font-weight: 900 !important;
    fill: white;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.battery-fill-container {
    margin: 1.25rem 0 !important;
}

/* Soften battery percentage font */
.battery-percentage-text {
    font-size: 2.25rem !important;
    font-weight: 700 !important;
}